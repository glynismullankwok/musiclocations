<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <container>
        <label for="Genres">Choose a genre:</label>
        <select name="Genres" id="genre-list">
            <option value="choose">Choose a genre from list</option>
        </select>
        <form>
            City:<input type="text" id="inputCity">
        </form>
        <button id="submit">Submit</button>
        <div></div>
    </container>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type='text/javascript' src='music-genre.json'></script>
    <script type="text/javascript">

        document.cookie = "Set-Cookie: SameSite=None; Secure"

        var mydata = data
        var selectedId = ""
        var input = ""
        $("#genre-list").change(function () {
            console.log(this.value)
            selectedId = this.value
        });

        $("#submit").click(function () {
            input = $('input').val()
            console.log(input)

            $.ajax({
                type: "GET",
                data: {
                    apikey: "4d79a850d35d2e78003074885fedf889",
                    q_lyrics: input,
                    f_music_genre_id: selectedId,
                    page_size: "25",
                    format: "jsonp",
                    page: '1',
                    callback: "jsonp_callback"
                },
                url: "https://api.musixmatch.com/ws/1.1/track.search",
                dataType: "jsonp",
                jsonpCallback: 'jsonp_callback',
                contentType: 'application/json',
                success: function (data) {
                    console.log(data);

                    var trackName = JSON.stringify(data.message.body.track_list[0].track.track_name)
                    trackName = trackName.replace('"', '')

                    $('div').append($(`<p>${trackName}</p>`));

                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.log(jqXHR);
                    console.log(textStatus);
                    console.log(errorThrown);
                }
            });

        })

        for (var i = 0; i < 360; i++) {

            if (mydata.message.body.music_genre_list[i].music_genre.music_genre_parent_id === 34) {
                // console.log(mydata.message.body.music_genre_list[i].music_genre.music_genre_name)

                var genres = mydata.message.body.music_genre_list[i].music_genre.music_genre_name

                var genreID = mydata.message.body.music_genre_list[i].music_genre.music_genre_id

                $('select').append($(`<option value="${genreID}">${genres}</option>`));
            }
        }

        // }

        // Music APIs
        // In order to get locations from song lyrics
        // Use the MusixMatch API
        // track.search API 
        // "https://api.musixmatch.com/ws/1.1/track.search"

        // And be able to filter by genre
        // Use the MusixMatch API
        // Select from genre list using the 
        // music.genres.get
        // "https://api.musixmatch.com/ws/1.1/music.genres.get"


        // 

        // $.ajax({
        //     type: "GET",
        //     data: {
        //         apikey: "4d79a850d35d2e78003074885fedf889",
        //         // music_genre_parent_id: "2",
        //         // page_size: "25",
        //         format: "jsonp",
        //         // page: '1',
        //         callback: "jsonp_callback"
        //     },
        //     url: "https://api.musixmatch.com/ws/1.1/music.genres.get",
        //     dataType: "jsonp",
        //     jsonpCallback: 'jsonp_callback',
        //     contentType: 'application/json',
        //     success: function (data) {

        //         console.log(data.message.body)

        //         for (var i = 0; i < 363; i++) {

        //             if (data.message.body.music_genre_list[i].music_genre) {
        //                 if (data.message.body.music_genre_list[i].music_genre.music_genre_parent_id === 34) {

        //                     console.log(data.message.body.music_genre_list[i].music_genre.music_genre_name + ", " + data.message.body.music_genre_list[i].music_genre.music_genre_id);
        //                 }
        //             }
        //         }

        //     },
        //     error: function (jqXHR, textStatus, errorThrown) {
        //         console.log(jqXHR);
        //         console.log(textStatus);
        //         console.log(errorThrown);
        //     }
        // });

        // }




        // Integrate the track-search and genre api on the term

        // Music add-ons
            // Get song chords with songsterr
                // http://www.songsterr.com/a/ra/songs.json?pattern=Marley






    </script>

</body>

</html>